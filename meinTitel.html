<!DOCTYPE
html>

<html
lang="en">

<head>

<meta
charset="UTF-8">

<meta
name="viewport"
content="width=device-width, initial-scale=1.0">

<title>Chart.js Boilerplate mit Pop-up</title>

<script
src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>

/* Grundlegendes Styling für das Pop-up (Modal) */

.modal {

display:
none;
/* Standardmäßig versteckt */

position:
fixed;
/* Fixiert auf dem Bildschirm */

z-index:
1000;
/* Immer im Vordergrund */

left:
0;

top:
0;

width:
100%;

height:
100%;

overflow:
auto;

background-color:
rgba(0,0,0,0.4);
/* Leichter, dunkler Hintergrund */

}




.modal-content {

background-color:
#fefefe;

margin:
15%
auto;
/* 15% von oben und zentriert */

padding:
20px;

border:
1px
solid
#888;

width:
80%;
/* Kann angepasst werden */

max-width:
400px;

border-radius:
8px;

position:
relative;

}




/* Schließen-Button (X) Styling */

.close {

color:
#aaa;

float:
right;

font-size:
28px;

font-weight:
bold;

line-height:
20px;

padding:
0
5px;

}




.close:hover,

.close:focus {

color:
black;

text-decoration:
none;

cursor:
pointer;

}

</style>

</head>

<body>
    <canvas id="myChart"></canvas>
    <div id="data-popup" class="modal"> 
        <div class="modal-content">

            <span class="close" onclick="closePopup()">&times;</span>

        <h3 id="popup-title"></h3>

        <p id="popup-data"></p>

</div>

</div>

<script>
    const xAchse_array = ["Jan","Sara","Siro","Jasper","Wolfi"];

    const yAchse_array = [5,50,15,0,25];

const popup = document.getElementById('data-popup');

const popupTitle = document.getElementById('popup-title');

const popupData = document.getElementById('popup-data');

const chartCanvas = document.querySelector('#myChart');




// Funktion zum Schließen des Pop-ups

function closePopup() { popup.style.display = "none";}




// Event-Listener für die ESC-Taste

document.addEventListener('keydown',
function(event) {

if (event.key === "Escape" && popup.style.display === "block") {
closePopup();

}

});




// Chart-Konfiguration

const myChart = new Chart(chartCanvas.getContext("2d"),
 {

    type: "line",

    data: {

        labels: xAchse_array,

        datasets:[

        {

            data: yAchse_array,

        label: "Scores",

        tension: 0.1,
// für eine Linie




// NEU: Vergrößert den anklickbaren Bereich um 15 Pixel

hitRadius:
50,

// Optional: Wenn Sie den sichtbaren Punkt (Radius 5) beibehalten wollen

pointStyle: new Image(),

pointRadius:
5,

pointHoverRadius:
50,

pointStyle: (() => {

const boatIcon = new Image();

boatIcon.src = "Boot01.svg";
// Beispiel-URL für ein Boot-SVG

return
boatIcon;

})()

} 

]

},

options: {

responsive:
true,

// X_onClick-Handler, der ausgelöst wird, wenn auf das Canvas geklickt wird

X_onClick: (e) => {

// getElementsAtEventForMode findet die Elemente (Punkte), die angeklickt wurden

// 'nearest' und { intersect: true } sind gängige Einstellungen für Chart.js 4+

const activePoints = myChart.getElementsAtEventForMode(
e,'nearest',

{ 
intersect:true },

true

);




// Prüfen, ob ein Datenpunkt geklickt wurde

if (activePoints.length
 > 0) {

const
firstPoint =
activePoints[0];

const
index =
firstPoint.index;


// Daten des geklickten Punktes abrufen

const
label =
myChart.data.labels[index];

const
score =
myChart.data.datasets[0].data[index];




// Pop-up mit den Daten befüllen und anzeigen

popupTitle.textContent
 = `Datenpunkt: ${label}`;

popupData.textContent
 = `Erreichter Score: ${score}`;

popup.style.display
 = "block";

}

}

}

});




</script>

</body>

</html>
